# HTTP 代理端口
port: 7890

# SOCKS5 代理端口
socks-port: 7891

# 允许局域网的连接（可用来共享代理）
allow-lan: true

# 规则模式：Rule（规则） / Global（全局代理）/ Direct（全局直连）
mode: Rule

# 设置日志输出级别 (默认级别：silent，即不输出任何内容，以避免因日志内容过大而导致程序内存溢出）。
# 5 个级别：silent / info / warning / error / debug。级别越高日志输出量越大，越倾向于调试，若需要请自行开启。
log-level: info

# clash 的 RESTful API
external-controller: 127.0.0.1:9090

# DNS 设置
dns:
  use-system-hosts: false
  listen: "127.0.0.1:5335"
  default-nameserver: [180.76.76.76, 182.254.118.118, 8.8.8.8, 180.184.2.2]
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    [
      "*.lan",
      "stun.*.*.*",
      "stun.*.*",
      time.windows.com,
      time.nist.gov,
      time.apple.com,
      time.asia.apple.com,
      "*.ntp.org.cn",
      "*.openwrt.pool.ntp.org",
      time1.cloud.tencent.com,
      time.ustc.edu.cn,
      pool.ntp.org,
      ntp.ubuntu.com,
      ntp.aliyun.com,
      ntp1.aliyun.com,
      ntp2.aliyun.com,
      ntp3.aliyun.com,
      ntp4.aliyun.com,
      ntp5.aliyun.com,
      ntp6.aliyun.com,
      ntp7.aliyun.com,
      time1.aliyun.com,
      time2.aliyun.com,
      time3.aliyun.com,
      time4.aliyun.com,
      time5.aliyun.com,
      time6.aliyun.com,
      time7.aliyun.com,
      "*.time.edu.cn",
      time1.apple.com,
      time2.apple.com,
      time3.apple.com,
      time4.apple.com,
      time5.apple.com,
      time6.apple.com,
      time7.apple.com,
      time1.google.com,
      time2.google.com,
      time3.google.com,
      time4.google.com,
      music.163.com,
      "*.music.163.com",
      "*.126.net",
      musicapi.taihe.com,
      music.taihe.com,
      songsearch.kugou.com,
      trackercdn.kugou.com,
      "*.kuwo.cn",
      api-jooxtt.sanook.com,
      api.joox.com,
      joox.com,
      y.qq.com,
      "*.y.qq.com",
      streamoc.music.tc.qq.com,
      mobileoc.music.tc.qq.com,
      isure.stream.qqmusic.qq.com,
      dl.stream.qqmusic.qq.com,
      aqqmusic.tc.qq.com,
      amobile.music.tc.qq.com,
      "*.xiami.com",
      "*.music.migu.cn",
      music.migu.cn,
      "*.msftconnecttest.com",
      "*.msftncsi.com",
      localhost.ptlogin2.qq.com,
      "*.*.*.srv.nintendo.net",
      "*.*.stun.playstation.net",
      "xbox.*.*.microsoft.com",
      "*.ipv6.microsoft.com",
      "*.*.xboxlive.com",
      speedtest.cros.wr.pvp.net,
    ]
  nameserver:
    [
      "https://223.6.6.6/dns-query#h3=true",
      "https://223.5.5.5/dns-query",
      "https://doh.pub/dns-query",
      "https://dns.alidns.com/dns-query",
    ]
  fallback:
    [
      "https://ada.openbld.net/dns-query",
      223.5.5.5,
      119.29.29.29,
      8.8.8.8,
      168.95.192.1,
    ]
  fallback-filter:
    {
      geoip: true,
      ipcidr: [240.0.0.0/4, 0.0.0.0/32, 127.0.0.1/32],
      domain:
        [
          +.google.com,
          +.facebook.com,
          +.twitter.com,
          +.youtube.com,
          +.xn--ngstr-lra8j.com,
          +.google.cn,
          +.googleapis.cn,
          +.googleapis.com,
          +.gvt1.com,
        ],
    }

# Stash
url-rewrite:
  - ^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
  - ^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
